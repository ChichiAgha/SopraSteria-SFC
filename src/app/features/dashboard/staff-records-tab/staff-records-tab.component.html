<div class="row">
  <div class="col-md-8">
    <h3 class="fs-24 mb-4 text-weight-bold">Staff records ({{ workers?.length }})</h3>
  </div>
  <div class="col-md-4">
    <a routerLink="/worker/start-screen" role="button" class="btn btn-primary">
      Add staff records
    </a>
  </div>
</div>
<div class="row">
  <div *ngIf="createStaffResponse" class="col-12">
    <app-status title="&#10003; Success.">
      {{ createStaffResponse | i18nPlural: {
          '=1': '# staff record has been saved.',
          'other': '# staff records have been saved.'
        }
      }}
    </app-status>
  </div>
  <div *ngIf="incomplete" class="col-12">
    <p><strong>What you need to do next.</strong></p>

    <app-inset-text *ngIf="totalStaff > workers?.length" color="todo">
      You said you have {{ totalStaff }} members of staff.<br />
      You need to update your Number of Staff or complete {{ totalStaff - workers.length }} more staff records.
    </app-inset-text>

    <app-inset-text *ngIf="totalStaff < workers?.length" color="todo">
      You have created more staff records than you have members of staff ({{ totalStaff }}).<br />
      You need to update your Number of Staff to {{ workers.length }} or delete some records.
    </app-inset-text>

    <p *ngIf="totalStaff === workers?.length">Provide more information for {{ incomplete }} staff records.</p>
  </div>
</div>
<div class="row">
  <div class="col-12">
    <table class="govuk-table">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="col">Staff name</th>
          <th class="govuk-table__header" scope="col">Job role</th>
          <th class="govuk-table__header" scope="col">Last updated</th>
          <th *ngIf="!displayWDFReport && totalStaff === workers?.length" class="govuk-table__header" scope="col">Status</th>
          <th *ngIf="displayWDFReport" class="govuk-table__header" scope="col">WDF</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        <tr class="govuk-table__row" *ngFor="let worker of workers">
          <td class="govuk-table__cell" scope="row">
            <a *ngIf="displayWDFReport" [routerLink]="['/worker', worker.uid]">{{ worker.nameOrId }}</a>
            <ng-container *ngIf="!displayWDFReport">
              <ng-container *ngIf="worker.completed">{{ worker.nameOrId }}</ng-container>
              <a *ngIf="!worker.completed" [routerLink]="['/worker', worker.uid]">{{ worker.nameOrId }}</a>
            </ng-container>
          </td>
          <td class="govuk-table__cell">{{ worker.mainJob.title }}</td>
          <td class="govuk-table__cell">{{ worker.updated | amTimeAgo }}</td>
          <td *ngIf="!displayWDFReport && totalStaff === workers?.length" class="govuk-table__cell"><a *ngIf="!worker.completed" [routerLink]="['/worker', worker.uid, worker.mainJob?.jobId === 27 ? 'mental-health-professional' : 'main-job-start-date']" class="icon-link icon-flag">Provide more information</a></td>
          <td *ngIf="displayWDFReport" class="govuk-table__cell">
            <p class="main-body-text col-12 m-0 p-0" *ngIf="worker.wdfEligible"><img src="/assets/img/tick-icon.svg" /> Meeting criteria</p>
            <p class="main-body-text col-12 m-0 p-0" *ngIf="!worker.wdfEligible"><img src="/assets/img/cross-icon.svg" /> Not meeting criteria</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
