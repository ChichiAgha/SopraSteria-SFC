language: node_js
node_js:
- '10.10.0'
dist: trusty
sudo: true
cache: npm
addons:
  chrome: stable  
before_install:
    - export CHROME_BIN=chromium-browser
    - export DISPLAY=:99.0
    - sh -e /etc/init.d/xvfb start
    - google-chrome-stable --headless --no-sandbox --disable-gpu --remote-debugging-port=9876 http://localhost &
install:
  - npm install
#  - npm install -g karma-cli
#  - npm install -g bower
env:  
  global:
  #  - B_NAME1=develop
  #  - B_NAME2=master
  #  - B_NAME3=test
    #- GOOGLE_CHROME_BINARY=/usr/bin/google-chrome-beta
    #- if [ "$TRAVIS_BRANCH"=master]; then B_NAME=master; elif [ "$TRAVIS_BRANCH"=develop] then B_NAME=develop; else B_NAME=test; fi
    #- if [ "$TRAVIS_BRANCH"=develop]; then B_NAME=develop; fi
    #- if [ "$TRAVIS_BRANCH"=test]; then B_NAME=test; fi
before_script:
    - "sudo chown root /opt/google/chrome/chrome-sandbox"
    - "sudo chmod 4755 /opt/google/chrome/chrome-sandbox"
    - export CHROME_BIN=chromium-browser
script:
  - npm run build
  notifications:
    slack: skills-for-care:Co9S4WS4ZitevGOyBrEb6yEL
